export async function onRequestGet({ env }) { 
const result = await env.articles_db
.prepare("SELECT slug, created_at FROM articles ORDER BY created_at DESC") .all();
const base = "https://smartencyclopedia.uk"; 
const urls = result.results.map(a => <url> <loc>${base}/article.html?slug=${encodeURIComponent(a.slug)}</loc> 
<lastmod>${new Date(a.created_at).toISOString()}</lastmod>
<changefreq>daily</changefreq> 
<priority>0.9</priority> </url> ).join(""); return new Response( <?xml version="1.0" encoding="UTF-8"?> 
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"> <url> 
<loc>${base}</loc> <lastmod>${new Date().toISOString()}</lastmod> <priority>1.0</priority> </url> ${urls} </urlset>, { headers: { "Content-Type": "application/xml" } } ); }